<template>
  <fieldset>
    <legend>${title}</legend>

    <button type="button" class="add-item clearfix"
            click.delegate="add()">Add</button>

    <sf-errors errors.bind="errors"></sf-errors>
    <array-key repeat.for="item of value">
      <key-content>
        <sf-string if.to-view="definitions[$index].type === 'string'"
                   value.bind="value[$index]"
                   definition.bind="definitions[$index]"
                   errors.bind="errors[$index]">
        </sf-string>

        <sf-boolean if.to-view="definitions[$index].type === 'boolean'"
                    value.bind="value[$index]"
                    definition.bind="definitions[$index]"
                    errors.bind="errors[$index]"></sf-boolean>

        <sf-number if.to-view="definitions[$index].type === 'number'"
                   value.bind="value[$index]"
                   definition.bind="definitions[$index]"
                   errors.bind="errors[$index]"></sf-number>

        <sf-object if.to-view="definitions[$index].type === 'object'"
                   value.bind="value[$index]"
                   definition.bind="definitions[$index]"
                   errors.bind="errors[$index]"></sf-object>

        <sf-array if.to-view="definitions[$index].type === 'array'"
                  value.bind="value[$index]"
                  definition.bind="definitions[$index]"
                  errors.bind="errors[$index]"></sf-array>
      </key-content>
      <sf-array-item-toolbar index.bind="$index"
                             first.bind="$first"
                             last.bind="$last"
                             move-up.call="reorder($index, 'up')"
                             move-down.call="reorder($index, 'down')"
                             remove.call="remove($index)"
                             definition.bind="definitions[$index]"
                             if.bind="!definitions.fixed">
      </sf-array-item-toolbar>
    </array-key>
  </fieldset>
</template>
